<p>Link del repository del plugin utilizzato: https://github.com/redCOMPONENT-COM/mvcOverride</p>
<p> </p>
<p>La seguente documentazione è stata riportata direttamente dal sito di supporto joomla: https://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core</p>
<p> </p>
<h3><span id="NOTICE" class="mw-headline">NOTICE</span></h3>
<p>This method only works if you install and enable the 3rd party MVC plugin joomla-override found on github - or provide your own equivalent plugin. It is fine for advanced developers - just be aware that this is not part of Joomla! Core code</p>
<h3><span id="Summary" class="mw-headline">Summary</span></h3>
<p>There may be times when you need to override the Joomla! MVC Component to add new functionality or to completely customise the component. The MVC component can be completely overridden by using the same class names that are used in the component. This is achieved by loading a system plugin before the component is dispatched by the application.</p>
<p>You can create your own plugin to do this.</p>
<pre><code>class plgSystemComContentOverride extends JPlugin {
      public function __construct(&amp;$subject, $config = array()) {
         parent::__construct($subject, $config);
     }

     public function onAfterRoute() {
         $app = JFactory::getApplication();
         if(&#39;com_content&#39; == JRequest::getCMD(&#39;option&#39;) &amp;&amp; !$app-&gt;isAdmin()) {
             require_once(dirname(__FILE__) . &#39;/comcontentoverride/my_content_controller.php&#39;);
         }
     } 
}
</code>
</pre>
<p> </p>
<hr />
<p>In the examples below we are using an <a class="external text" href="https://github.com/redCOMPONENT-COM/mvcOverride" rel="nofollow" target="_blank">Override MVC plugin</a></p>
<hr />
<h2><span id="Getting_a_head-start_with_overrides" class="mw-headline">Getting a head-start with overrides</span></h2>
<p>You can override by templating or by application scope (frontend/backend).</p>
<h2><span id="Using_a_templating_method" class="mw-headline">Using a templating method</span></h2>
<p>Override Base Component Controller</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">TEMPLATE_NAME/code/COMPONENT_NAME/CONTROLLER.php
</pre>
</div>
</div>
<p>Override Another Component Controller</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">TEMPLATE_NAME/code/COMPONENT_NAME/controllers/CONTROLLER_NAME.php
</pre>
</div>
</div>
<p>Override Models</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">TEMPLATE_NAME/code/COMPONENT_NAME/models/MODEL_NAME.php
</pre>
</div>
</div>
<p>Override Views</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">TEMPLATE_NAME/code/COMPONENT_NAME/views/VIEW_NAME/VIEW_NAME(.FORMAT).php
</pre>
</div>
</div>
<h2><span id="Using_application_scope_method" class="mw-headline">Using application scope method</span></h2>
<p>You can override by creating a <code>code</code> folder in the base path from application.</p>
<p><strong>Note</strong>: this method is experimental. Please read this <a class="external free" href="https://groups.google.com/forum/?fromgroups=#!searchin/joomla-dev-cms/override/joomla-dev-cms/_vVxbHsXm20/JdsBRP8xrPAJ" rel="nofollow" target="_blank">https://groups.google.com/forum/?fromgroups=#!searchin/joomla-dev-cms/override/joomla-dev-cms/_vVxbHsXm20/JdsBRP8xrPAJ</a> and this first <a class="external free" href="http://joomlacode.org/gf/project/joomla/tracker/?action=TrackerItemEdit&amp;tracker_item_id=29031" rel="nofollow" target="_blank">http://joomlacode.org/gf/project/joomla/tracker/?action=TrackerItemEdit&amp;tracker_item_id=29031</a></p>
<p><strong>Site General Override</strong></p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">code/COMPONENT_NAME/CONTROLLER.php
</pre>
</div>
</div>
<p>Override Another Component Controller</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">code/COMPONENT_NAME/controllers/CONTROLLER_NAME.php
</pre>
</div>
</div>
<p>Override Models</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">code/COMPONENT_NAME/models/MODEL_NAME.php
</pre>
</div>
</div>
<p>Override Views</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">code/COMPONENT_NAME/views/VIEW_NAME/VIEW_NAME(.FORMAT).php
</pre>
</div>
</div>
<p><strong>Administrator General Override</strong></p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">administrator/code/COMPONENT_NAME/CONTROLLER.php
</pre>
</div>
</div>
<p>Override Another Component Controller</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">administrator/code/COMPONENT_NAME/controllers/CONTROLLER_NAME.php
</pre>
</div>
</div>
<p>Override Models</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">administrator/code/COMPONENT_NAME/models/MODEL_NAME.php
</pre>
</div>
</div>
<p>Override Views</p>
<div class="mw-geshi mw-code mw-content-ltr" dir="ltr">
<div class="xml source-xml" style="font-family: monospace;">
<pre class="de1">administrator/code/COMPONENT_NAME/views/VIEW_NAME/VIEW_NAME(.FORMAT).php
</pre>
</div>
</div>
<p><strong>Extending Default Class</strong></p>
<p>if you ENABLE the override class functionality you can extend original classes and override your custom methods.</p>
<p>See this example with banner controller:</p>
<p>file: administrator/code/com_banners/controller.php</p>
<pre>/**
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license             GNU General Public License version 2 or later; see LICENSE.txt
 */
// No direct access
defined(&#39;_JEXEC&#39;) or die;
/**
 * Banners master display controller.
 *
 * @package             Joomla.Administrator
 * @subpackage  com_banners
 * @since               1.6
 */
class BannersController extends BannersControllerDefault
{
//your custom methods here
}
</pre>
<p> </p>
<p>Un altro esempio di uso di questa tecnica è il seguente, riportato da questo link: http://www.digitaldisseny.com/en/blog/94-joomla-override-model-view-controller-part-one</p>
<p> </p>
<p> </p>
<p>In this days Nick Savov started a discussion in the <a title="Joomla! Platform google group" href="https://groups.google.com/forum/?fromgroups=#!forum/joomla-dev-platform">Joomla! Platform Development google group</a> about <a title="Debate about improving joomla override system" href="https://groups.google.com/forum/?fromgroups=#!topic/joomla-dev-platform/WSW_QrP5NI0">improving the Joomla! override system</a>. I really think that <a title="Joomla! homepage" href="http://www.joomla.org/">Joomla! </a>has to improve the way that developers can override core or third components classes. But it&#39;s true that this is a debate concerning to Joomla! CMS, not to the Joomla! Platform.</p>
<h2 class="titulonum"><strong>What is an override?</strong></h2>
<p>Core and third part overrides allow you to replace/extend any component default models, views and controllers without having to edit the source file directly.</p>
<p>They are useful for example when you just need to add a functionallity to a already existent component but you don&#39;t want to lose that changes when component is updated or stopping the system to keep updateable.</p>
<p>Most times they are fast changes/patches that solve issues or doesn&#39;t worth to lose time (and money if you are a developer) with a better solution.</p>
<p>If you have already developed online stores with <a title="Magento homepage" href="http://www.magentocommerce.com/">Magento</a> or <a title="Prestashop homepage" href="http://www.prestashop.com/">Prestashop</a> you probably know the way that overrides work on that systems. You only need to copy a core file into an override folder to safely start hacking it.</p>
<p>Actually the best solution to override controllers, models or views in Joomla! is the <a title="Override Plugin at Joomla! Extensions" href="http://extensions.joomla.org/extensions/style-a-design/templating/15611">Override Plugin</a> developed by <a title="Julio Pontes homepage" href="http://about.me/juliopontes">Julio Pontes</a>. I&#39;ve been trying to get some time to test it and finally got it this week.</p>
<h2 class="titulonum dos"><strong>How the plugin works?</strong></h2>
<p>The only documentation about the plugin seems to be at the <a title="Plugin documentation at Joomla! Documentation" href="http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core">Joomla! Documentation wiki</a>. Just one page to explain how to override model, view and controller files? Yes, its enough!! Although I still miss better documentation.</p>
<p>The plugin uses almost the same override method than Magento or Prestashop:</p>
<ol>
<li>Copy the class to be overriden into a specific folder (you can see the override folder options in the <a title="Plugin documentation at Joomla! Documentation" href="http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core">Joomla! Documentation page</a>).</li>
<li>Edit the class in the override folder to extend the Default standard class.</li>
</ol>
<p>You can also replace the original class instead of extending it but most times it&#39;s preferable to extend it. This way you only have to override the methods that you want to customize.</p>
<h2 class="titulonum tres"><strong>The test challenge</strong></h2>
<p>So why don&#39;t test the Override Plugin in a real challenge? :)</p>
<p>I&#39;ve been some time trying to <strong>modify the <a title="K2 CCK homepage" href="http://getk2.org/">K2</a> item model to allow its use externally (without being in the K2 component itself)</strong>. Using the model to create items has some advantages:</p>
<ul>
<li>Avoid SQL queries.</li>
<li>Plugins are applied into the item as when you create it from the k2 component.</li>
<li>Create items in about 10 lines of code.</li>
</ul>
<p>We are going to face some <strong>problems in the default K2 item model</strong>:</p>
<ul>
<li>It uses the JPATH_COMPONENT and JPATH_COMPONENT_ADMINISTRATOR constants to require files. When you call it from a different component all requires are broken.</li>
<li>The save method uses POST data to automatically receive the data from the K2 forms. You cannot use it as the content article save method that accepts a $data array as parameter. The controller should retrieve the POST data and the call the save method with the data as parameter.</li>
<li>Each item saved redirects you to the itemlist view. Save should return boolean. The controller should do the redirections.</li>
</ul>
<h2 class="titulonum cuatro"><strong>Create the K2 item model override file</strong></h2>
<p>First of all we need to create the override file. As the model that we want to override is in the backend we are going to use the override folder:</p>
<p><strong>administrator/code</strong></p>
<p>We are going to copy the original K2 item model from:</p>
<p><strong>administrator/components/com_k2/models/item.php</strong></p>
<p>To:</p>
<p><strong>administrator/code/com_k2/models/item.php</strong></p>
<h2 class="titulonum cinco"><strong style="color: inherit; font-family: inherit;">Customize the override file</strong></h2>
<p>Next step will be editing the override file to extend the original K2ModelItem. Find:</p>
<pre class="brush:php">class K2ModelItem extends JModel
{</pre>
<p>The original class definition extends JModel. The Override Plugin renames the original class from K2ModelItem to K2ModelItemDefault. Our override is going to extend that Default class. That will allow us to only modify/create needed methods.</p>
<p>Replace the class definition with:</p>
<pre class="brush:php">class K2ModelItem extends K2ModelItemDefault
{</pre>
<p>Now if we load K2 we will receive a warning about the use of component based constants:</p>
<p><span style="color: #800000;">Your override file use constants, please replace code constants</span><br /><span style="color: #800000;">JPATH_COMPONENT -&gt; JPATH_SOURCE_COMPONENT,</span><br /><span style="color: #800000;">JPATH_COMPONENT_SITE -&gt; JPATH_SOURCE_COMPONENT_SITE and</span><br /><span style="color: #800000;">JPATH_COMPONENT_ADMINISTRATOR -&gt; JPATH_SOURCE_COMPONENT_ADMINISTRATOR</span></p>
<p>The plugin suggest us to replace the component based constants with the replacement constants that it defines. But as we want to use the model from outside the k2 component we are going to use different constant replacements. Every model should use this kind of constants to allow its use externally.</p>
<p>Find and replace the following constants with the value after "-&gt;":</p>
<p><strong>JPATH_COMPONENT</strong> -&gt; JPATH_ADMINISTRATOR . &#39;/components/com_k2&#39;<br /><strong>JPATH_COMPONENT_SITE</strong> -&gt; JPATH_SITE . &#39;/components/com_k2&#39;<br /><strong>JPATH_COMPONENT_ADMINISTRATOR</strong> -&gt; JPATH_ADMINISTRATOR . &#39;/components/com_k2&#39;</p>
<p>We are going to empty our extension class to start adding content from scratch.</p>
<p>So the current override content is:</p>
<pre class="brush:php">&lt;?php
// no direct access
defined(&#39;_JEXEC&#39;) or die(&#39;Restricted access&#39;);
JLoader::import(&#39;joomla.application.component.model&#39;);
JTable::addIncludePath(JPATH_ADMINISTRATOR . &#39;/components/com_k2/tables&#39;);
class K2ModelItem extends K2ModelItemDefault
{
}</pre>
<p>We finally have our override ready to start using it. Reload the K2 item administration and it should load normally.</p>
<p>- "Hey!! But this does nothing!!"</p>
<p>You are wrong. This already does the hard stuff. We have patched and installed the plugin, learned where to store overrides and how to extend the default classes avoiding errors.</p>
<h2 class="titulonum siete"><strong>Override test</strong></h2>
<p>Ok ok. We are going to do a small override test overriding the <strong>getData</strong> method. We will add a method in our override class like:</p>
<pre class="brush:php">&lt;?php
// no direct access
defined(&#39;_JEXEC&#39;) or die(&#39;Restricted access&#39;);
JLoader::import(&#39;joomla.application.component.model&#39;);
JTable::addIncludePath(JPATH_ADMINISTRATOR . &#39;/components/com_k2/tables&#39;);
class K2ModelItem extends K2ModelItemDefault
{
	function getData()
	{
		$row = parent::getData();
		$row-&gt;title .= &#39; (override = ON)&#39;;
		return $row;
	}
}</pre>
<p>Now if you edit any K2 item you will see that the string "(override = ON)" string is added to the title.</p>
<p> </p>
<p>Remember to delete the getData method after testing the override! :)</p>