<h1 id="Introduzione">Introduzione</h1>
<p> </p>
<p><strong>Ufw</strong> (<strong>U</strong>ncomplicated <strong>f</strong>ire<strong>w</strong>all) è l&#39;applicazione predefinita in <strong>Ubuntu</strong> per la configurazione del firewall. Sviluppato per semplificare la configurazione di <a href="https://wiki.ubuntu-it.org/Sicurezza/Iptables">iptables</a>, <strong>Ufw</strong> offre un modo semplice per creare un firewall basato su protocolli IPv4 e IPv6.</p>
<h1 id="Impostare_le_regole_predefinite">Installazione </h1>
<pre class="brush: bash;fontsize: 100; first-line: 1; ">apt-get install ufw</pre>
<p> </p>
<p id="Impostare_le_regole_predefinite"><span style="color: inherit; font-family: inherit; font-size: 38.5px; font-weight: bold;">Impostare le regole predefinite</span></p>
<p class="line862">E&#39; consigliato impostare la modalità predefinita di <strong>Ufw</strong> prima di abilitarlo.</p>
<ul>
<li>
<p class="line862">Per bloccare tutto il traffico in entrata, digitare in una finestra di terminale il seguente comando:</p>
<pre> sudo ufw default deny</pre>
</li>
<li>
<p class="line862">Per consentire tutto il traffico in entrata, digitare in una finestra di terminale il seguente comando:</p>
<pre> sudo ufw default allow</pre>
</li>
<li class="gap">
<p class="line862">Per abilitare <strong>Ufw</strong> digitare in una finestra di terminale il seguente comando:</p>
<pre>sudo ufw enable</pre>
</li>
</ul>
<div>
<table>
<tbody>
<tr>
<td>
<p class="line891"><a href="https://wiki.ubuntu-it.org/Icone/Piccole?action=AttachFile&amp;do=view&amp;target=note.png"><img class="inline_center" src="https://wiki.ubuntu-it.org/Icone/Piccole?action=AttachFile&amp;do=get&amp;target=note.png" alt="" align="center" /></a></p>
</td>
<td>
<p class="line862">A meno che <strong>Ufw</strong> non si sia impostato inizialmente su <tt class="backtick">deny</tt>, sarà in modalità <tt class="backtick">allow</tt> e consentirà tutto il traffico in entrata e in uscita se prima non si è impostato il set di regole.</p>
</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>
<p class="line862">Per disabilitare <strong>Ufw</strong> digitare in una finestra di terminale il seguente comando:</p>
<pre> sudo ufw disable</pre>
</li>
</ul>
<p class="line867"> </p>
<h1 id="Consentire_e_bloccare_il_traffico">Consentire e bloccare il traffico</h1>
<ul>
<li>
<p class="line862">In generale, la sintassi è la seguente:</p>
<pre>sudo ufw allow/deny porta/protocollo (facoltativo)</pre>
</li>
<li class="gap">
<p class="line862">Per consentire i pacchetti tcp e udp in ingresso sulla porta 53, digitare il seguente comando in una finestra di terminale:</p>
<pre>sudo ufw allow 53</pre>
</li>
</ul>
<p> </p>
<h2 id="Sintassi_avanzata">Sintassi avanzata</h2>
<p class="line874">E&#39; anche possibile utilizzare una sintassi più completa specificando l&#39;origine e la destinazione degli indirizzi e delle porte.</p>
<ul>
<li>
<p class="line862">In generale, la sintassi è la seguente:</p>
<pre>sudo ufw allow/deny from indirizzo_ip to protocollo port numero_porta (protocollo e numero_porta facoltativi)</pre>
</li>
<li>
<p class="line862">Per consentire il traffico proveniente dall&#39;indirizzo IP 207.46.232.182, digitare il seguente comando in una finestra di terminale:</p>
<pre> sudo ufw allow from 207.46.232.182</pre>
</li>
<li>
<p class="line862">Per bloccare il traffico proveniente dall&#39;indirizzo IP 207.46.232.182, digitare il seguente comando in una finestra di terminale:</p>
<pre>sudo ufw deny from 207.46.232.182</pre>
</li>
<li>
<p class="line862">Per consentire il traffico proveniente dall&#39;indirizzo IP 192.168.0.4 alla porta 22 per tutti i protocolli, digitare il seguente comando in una finestra di terminale:</p>
<pre>sudo ufw allow from 192.168.0.4 to any port 22</pre>
</li>
<li>
<p class="line862">Per bloccare il traffico proveniente dall&#39;indirizzo IP 192.168.0.4 alla porta 22 per tutti i protocolli, digitare il seguente comando in una finestra di terminale:</p>
<pre>sudo ufw deny from 192.168.0.4 to any port 22</pre>
</li>
</ul>
<p> </p>
<h1 id="Eliminare_una_regola_esistente">Eliminare una regola esistente</h1>
<ul>
<li>
<p class="line862">Per eliminare una regola, usare <tt class="backtick">delete</tt> seguito dalla regola.</p>
</li>
<li>
<p class="line862">Per esempio, se la regola originale era:</p>
<pre>ufw deny 80/tcp</pre>
</li>
<li>
<p class="line862">Usare questo comando per cancellarla:</p>
<pre>sudo ufw delete deny 80/tcp</pre>
</li>
</ul>
<p> </p>
<h1 id="Servizi">Servizi</h1>
<p class="line862">Se la porta che si vuole aprire o chiudere è definita in <tt class="backtick">/etc/services</tt>, è possibile usare il nome al posto del numero della porta. Negli esempi seguenti, si sostituirà 22 con <tt class="backtick">ssh</tt>.</p>
<ul>
<li>
<p class="line862">Per vedere la lista dei servizi, digitare in una finestra ii terminale il seguente comando:</p>
<pre>less /etc/services</pre>
</li>
<li>
<p class="line862">La sintassi sarà la seguente:</p>
<pre>sudo ufw allow/deny nome_servizio</pre>
</li>
</ul>
<h1 id="Stato">Stato</h1>
<p class="line862">Verificare lo stato di <strong>Ufw</strong> permetterà di sapere se il firewall è attivato o disattivato e verrà mostrato l&#39;elenco delle regole attualmente applicate da <strong>Ufw</strong> a <strong>iptables</strong>.</p>
<ul>
<li>
<p class="line862">Per visualizzare lo stato del firewall, digitare il seguente comando in una finestra di terminale:</p>
<pre>sudo ufw status</pre>
</li>
<li>
<p class="line862">Se abilitato, un possibile output sarà il seguente:</p>
<pre>Firewall attivato

 To                         Action  From
 --                         ------  ----
 22:tcp                     DENY    192.168.0.1
 22:udp                     DENY    192.168.0.1
 22:tcp                     DENY    192.168.0.7
 22:udp                     DENY    192.168.0.7
 22:tcp                     ALLOW   192.168.0.0/24
 22:udp                     ALLOW   192.168.0.0/24</pre>
</li>
<li>
<p class="line862">Viceversa, il risultato sarà il seguente:</p>
<pre>Stato: inattivo</pre>
</li>
</ul>
<p> </p>